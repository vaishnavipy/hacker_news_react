(this["webpackJsonphacker-news"]=this["webpackJsonphacker-news"]||[]).push([[0],{28:function(e,t,c){},29:function(e,t,c){},35:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c(0),r=c.n(a),s=c(20),o=c.n(s),i=(c(28),c(4)),j=(c(29),c(5)),l=c(2),u=c(6),h=c(10),b=r.a.createContext();function m(e){var t,c,a=Object(u.useState)([]),r=Object(i.a)(a,2),s=r[0],o=r[1],j=Object(u.useState)([]),l=Object(i.a)(j,2),m=l[0],d=l[1],O=Object(u.useState)([]),f=Object(i.a)(O,2),x=f[0],g=f[1];return Object(n.jsx)(b.Provider,{value:{handleFavoritedStory:function(e,n){t=m.findIndex((function(e){return e.objectID===n})),(c=Object(h.a)(m))[t].favorite=!0,d(c),o((function(t){return[].concat(Object(h.a)(t),[e])}))},removeFavoritedStory:function(e){t=m.findIndex((function(t){return t.objectID===e})),(c=Object(h.a)(m))[t].favorite=!1,d(c),o((function(t){return t.filter((function(t){return t.objectID!==e}))}))},storyArr:s,fillObjectIdArr:function(e){d((function(t){return[].concat(Object(h.a)(t),[e])}))},objectIdArr:m,getCommentStory:function(e,t,c){g([e,t,c])},commentStoryArr:x},children:e.children})}var d=function(e){var t=e.storyId,c=e.fullStory,r=Object(a.useContext)(b),s=r.handleFavoritedStory,o=r.removeFavoritedStory,i=r.objectIdArr.find((function(e){return e.objectID===t})).favorite;return Object(n.jsx)("span",{className:"fav-icon",onClick:function(e){i?(console.log(e.target.id),o(e.target.id)):s(c,e.target.id)},id:t,children:i?" \u2716\ufe0f  Remove From Favorites":" \u2795 Add to Favorites"})};function O(e){var t=new Date,c=new Date(e);return t.getFullYear()===c.getFullYear()?t.getDate()===c.getDate()?t.getHours()===c.getHours()?"".concat(t.getMinutes()-c.getMinutes()," minutes ago"):"".concat(t.getHours()-c.getHours()," hours ago"):"".concat(t.getDate()-c.getDate()," days ago"):"".concat(t.getFullYear()-c.getFullYear()," years ago")}var f=function(e){var t=e.data,c=e.site,r=e.i,s=Object(a.useContext)(b).getCommentStory;return Object(n.jsxs)("div",{children:[Object(n.jsxs)("h3",{className:"title",children:[Object(n.jsxs)("a",{href:t.url,target:"_blank",children:[r+1,".  ",t.title," "]}),Object(n.jsx)("span",{className:"website",children:c})]}),Object(n.jsxs)("p",{className:"details",children:[t.points," by ",t.author," ",O(t.created_at)," |",Object(n.jsxs)(j.b,{to:"/hacker_news_react/item/id=".concat(t.objectID),children:["  ",Object(n.jsxs)("span",{className:"comments",id:"comment",onClick:function(){s(t,c,r)},children:[" ",t.num_comments," comments "]})," "]})," |",Object(n.jsx)(d,{storyId:t.objectID,fullStory:t})]}),Object(n.jsx)("hr",{})]})},x=c(22);var g=function(e){var t=e.news,c=e.loadMore,r=e.menu,s=Object(u.useState)(""),o=Object(i.a)(s,2),j=o[0],l=o[1],h=Object(a.useContext)(b).fillObjectIdArr,m=Object(u.useState)(60),d=Object(i.a)(m,2),O=d[0],g=d[1],v={latest:"https://hn.algolia.com/api/v1/search_by_date?tags=story&hitsPerPage=".concat(O),popular:"https://hn.algolia.com/api/v1/search?&hitsPerPage=".concat(O),ask:"http://hn.algolia.com/api/v1/search_by_date?tags=ask_hn&hitsPerPage=".concat(O,"&numericFilters=num_comments>3"),show:"http://hn.algolia.com/api/v1/search_by_date?tags=show_hn&hitsPerPage=".concat(O,"&numericFilters=num_comments>3")};return Object(a.useEffect)((function(){t&&l(t.map((function(e,t){if(h({objectID:e.objectID,favorite:!1}),e.url){var c=e.url.indexOf("//"),a=e.url.slice(c+2),r=a.indexOf("/");a=a.slice(0,r)}return Object(n.jsx)(f,{data:e,site:a,i:t})})))}),[t]),Object(n.jsx)("div",{children:Object(n.jsx)(x.a,{dataLength:t.length,next:function(){fetch(v[r]).then((function(e){return e.json()})).then((function(e){return c(e.hits,r)})),g((function(e){return Number(e)+30}))},hasMore:!0,loader:Object(n.jsx)("h4",{}),children:j})})};function v(e){var t=e.comment,c=e.margin;return Object(n.jsxs)("div",{style:{marginLeft:c},children:[Object(n.jsxs)("h3",{className:"comment-author",children:[t.author," | ",O(t.created_at)," "]}),Object(n.jsx)("p",{children:t.comment_text})]})}var p=function(){var e=Object(l.f)().itemID,t=Object(u.useContext)(b),c=t.commentStoryArr,a=t.getCommentStory,r=Object(i.a)(c,3),s=r[0],o=r[1],m=r[2],f=Object(u.useState)(""),x=Object(i.a)(f,2),g=x[0],p=x[1],_=Object(u.useState)(""),w=Object(i.a)(_,2),k=w[0],y=w[1];return Object(u.useEffect)((function(){e&&fetch("https://hn.algolia.com/api/v1/search?tags=comment,story_".concat(e)).then((function(e){return e.json()})).then((function(e){return p(e.hits)}))}),[]),Object(u.useEffect)((function(){var t=[];if(g){var c=g.filter((function(t){return t.parent_id==e})).map((function(e){return e.objectID}));console.log(c,"hi"),c.forEach((function(e){t=[].concat(Object(h.a)(t),Object(h.a)(g.filter((function(t){return t.objectID==e})).map((function(e){return Object(n.jsx)(v,{comment:e,margin:"2em"})})))),t=[].concat(Object(h.a)(t),Object(h.a)(g.filter((function(t){return t.parent_id==e})).map((function(e){return Object(n.jsx)(v,{comment:e,margin:"5em"})}))))})),y(t)}}),[g]),console.log(g),console.log(k,"comment"),Object(n.jsxs)("div",{className:"comment-container",children:[Object(n.jsxs)("div",{children:[Object(n.jsxs)("h3",{className:"title ",children:["   ",Object(n.jsxs)("a",{href:s.url,target:"_blank",children:["  ",s.title," "]}),Object(n.jsx)("span",{className:"website",children:o})]}),Object(n.jsxs)("p",{className:"details",children:[s.points," by ",s.author," ",O(s.created_at)," |",Object(n.jsxs)(j.b,{to:"/hacker_news_react/item/id=".concat(s.objectID),children:["  ",Object(n.jsxs)("span",{className:"comments",id:"comment",onClick:function(){a(s,o,m)},children:[" ",s.num_comments," comments "]})," "]})," |",Object(n.jsx)(d,{storyId:s.objectID,fullStory:s})]}),Object(n.jsx)("hr",{})]}),k]})};var _=function(){var e=Object(a.useContext)(b).storyArr,t=Object(a.useState)([]),c=Object(i.a)(t,2),r=c[0],s=c[1],o=Object(a.useState)([]),u=Object(i.a)(o,2),h=u[0],m=u[1],d=Object(a.useState)([]),O=Object(i.a)(d,2),f=O[0],x=O[1],v=Object(a.useState)([]),_=Object(i.a)(v,2),w=_[0],k=_[1],y=["https://hn.algolia.com/api/v1/search_by_date?tags=story&hitsPerPage=30","https://hn.algolia.com/api/v1/search?&hitsPerPage=30","http://hn.algolia.com/api/v1/search_by_date?tags=ask_hn&hitsPerPage=30&numericFilters=num_comments>3","http://hn.algolia.com/api/v1/search_by_date?tags=show_hn&hitsPerPage=30&numericFilters=num_comments>3"],S=document.querySelectorAll(".menu");function I(e,t){"latest"===t?s(e):"popular"===t?m(e):"ask"===t?x(e):"show"===t&&k(e)}return Object(a.useEffect)((function(){y.forEach((function(e,t){fetch(e).then((function(e){return e.json()})).then((function(e){0==t?s(e.hits):1==t?m(e.hits):2==t?x(e.hits):k(e.hits)}))}))}),[]),Object(n.jsxs)("div",{className:"app-container",children:[Object(n.jsxs)("div",{className:"header",onClick:function(e){e.target.classList.contains("menu")&&(S.forEach((function(e){return e.classList.remove("active")})),e.target.classList.add("active"))},children:[Object(n.jsx)("h2",{className:"logo",children:"HackerNews"}),Object(n.jsxs)(j.b,{to:"/hacker_news_react/",children:["  ",Object(n.jsx)("div",{className:"menu active",id:"latest",children:"New"})]}),Object(n.jsx)(j.b,{to:"/hacker_news_react/popular",children:Object(n.jsx)("div",{className:"menu",id:"popular",children:"Popular"})}),Object(n.jsx)(j.b,{to:"/hacker_news_react/ask",children:Object(n.jsx)("div",{className:"menu",id:"ask",children:"Ask"})}),Object(n.jsx)(j.b,{to:"/hacker_news_react/show",children:Object(n.jsx)("div",{className:"menu",id:"show",children:"Show"})}),Object(n.jsx)(j.b,{to:"/hacker_news_react/favorites",children:Object(n.jsx)("div",{className:"menu",id:"favorites",children:"Favorites"})})]}),Object(n.jsxs)(l.c,{children:[Object(n.jsxs)(l.a,{exact:!0,path:"/hacker_news_react/",children:["  ",Object(n.jsx)(g,{news:r,loadMore:I,menu:"latest"})," "]}),Object(n.jsx)(l.a,{path:"/hacker_news_react/popular",children:Object(n.jsx)(g,{news:h,loadMore:I,menu:"popular"})}),Object(n.jsx)(l.a,{path:"/hacker_news_react/ask",children:Object(n.jsx)(g,{news:f,loadMore:I,menu:"ask"})}),Object(n.jsx)(l.a,{path:"/hacker_news_react/show",children:Object(n.jsx)(g,{news:w,loadMore:I,menu:"show"})}),Object(n.jsx)(l.a,{path:"/hacker_news_react/favorites",children:Object(n.jsx)(g,{news:e,loadMore:I,menu:""})}),Object(n.jsx)(l.a,{path:"/hacker_news_react/item/id=:itemID",children:Object(n.jsx)(p,{})})]})]})};o.a.render(Object(n.jsx)(j.a,{children:Object(n.jsx)(m,{children:Object(n.jsx)(_,{})})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.387f5610.chunk.js.map